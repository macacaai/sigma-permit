import{s as xt,d as u,i as J,b as r,l as bt,m as g,o as yt,g as C,c as f,e as x,p as K,j as w,h,q as kt,n as st,r as $t,a as X,f as G,t as Y}from"../chunks/BM_9wLIj.js";import{S as Et,i as Tt,d as Z,t as O,a as N,c as mt,m as tt,b as et,e as at,g as vt}from"../chunks/DQoX3H7n.js";import{p as Dt,t as Pt,e as ht}from"../chunks/CEGMbthI.js";import{R as Ct,P as wt,S as It,T as St}from"../chunks/lZ7b4qBu.js";import{C as At}from"../chunks/hxjKIkmT.js";function gt(k,t,s){const i=k.slice();return i[6]=t[s],i}function Mt(k){let t,s,i='<tr><th>Name</th> <th>Product</th> <th>Price</th> <th>Billing</th> <th>Status</th> <th class="text-right">Actions</th></tr>',c,b,m,o=ht(k[0]),a=[];for(let e=0;e<o.length;e+=1)a[e]=pt(gt(k,o,e));const p=e=>O(a[e],1,1,()=>{a[e]=null});return{c(){t=h("table"),s=h("thead"),s.innerHTML=i,c=w(),b=h("tbody");for(let e=0;e<a.length;e+=1)a[e].c();this.h()},l(e){t=f(e,"TABLE",{class:!0});var l=x(t);s=f(l,"THEAD",{"data-svelte-h":!0}),K(s)!=="svelte-1p10hp3"&&(s.innerHTML=i),c=C(l),b=f(l,"TBODY",{});var n=x(b);for(let E=0;E<a.length;E+=1)a[E].l(n);n.forEach(u),l.forEach(u),this.h()},h(){g(t,"class","table")},m(e,l){J(e,t,l),r(t,s),r(t,c),r(t,b);for(let n=0;n<a.length;n+=1)a[n]&&a[n].m(b,null);m=!0},p(e,l){if(l&1){o=ht(e[0]);let n;for(n=0;n<o.length;n+=1){const E=gt(e,o,n);a[n]?(a[n].p(E,l),N(a[n],1)):(a[n]=pt(E),a[n].c(),N(a[n],1),a[n].m(b,null))}for(vt(),n=o.length;n<a.length;n+=1)p(n);mt()}},i(e){if(!m){for(let l=0;l<o.length;l+=1)N(a[l]);m=!0}},o(e){a=a.filter(Boolean);for(let l=0;l<a.length;l+=1)O(a[l]);m=!1},d(e){e&&u(t),$t(a,e)}}}function Vt(k){let t,s,i,c,b="No plans found",m,o,a="Get started by creating your first plan.",p;return s=new At({props:{class:"mx-auto text-gray-400 dark:text-gray-500 mb-4",size:48}}),{c(){t=h("div"),at(s.$$.fragment),i=w(),c=h("h3"),c.textContent=b,m=w(),o=h("p"),o.textContent=a,this.h()},l(e){t=f(e,"DIV",{class:!0});var l=x(t);et(s.$$.fragment,l),i=C(l),c=f(l,"H3",{class:!0,"data-svelte-h":!0}),K(c)!=="svelte-3y1gp8"&&(c.textContent=b),m=C(l),o=f(l,"P",{class:!0,"data-svelte-h":!0}),K(o)!=="svelte-1uqhzbo"&&(o.textContent=a),l.forEach(u),this.h()},h(){g(c,"class","text-lg font-medium text-gray-900 dark:text-gray-50 mb-2"),g(o,"class","text-gray-600 dark:text-gray-400 mb-4"),g(t,"class","text-center py-12")},m(e,l){J(e,t,l),tt(s,t,null),r(t,i),r(t,c),r(t,m),r(t,o),p=!0},p:st,i(e){p||(N(s.$$.fragment,e),p=!0)},o(e){O(s.$$.fragment,e),p=!1},d(e){e&&u(t),Z(s)}}}function Bt(k){let t,s='<div class="spinner mr-3"></div> <span class="text-gray-600 dark:text-gray-400">Loading plans...</span>';return{c(){t=h("div"),t.innerHTML=s,this.h()},l(i){t=f(i,"DIV",{class:!0,"data-svelte-h":!0}),K(t)!=="svelte-rrvftp"&&(t.innerHTML=s),this.h()},h(){g(t,"class","flex items-center justify-center py-12")},m(i,c){J(i,t,c)},p:st,i:st,o:st,d(i){i&&u(t)}}}function pt(k){var Q;let t,s,i=k[6].name+"",c,b,m,o=(((Q=k[6].product)==null?void 0:Q.name)||"Unknown")+"",a,p,e,l,n=k[6].price+"",E,H,z,U=k[6].billing_interval+"",M,V,$,y,L=k[6].is_active?"Active":"Inactive",j,q,R,T,B,d,D,I,S,A,F,P;return D=new It({props:{size:16}}),A=new St({props:{size:16}}),{c(){t=h("tr"),s=h("td"),c=Y(i),b=w(),m=h("td"),a=Y(o),p=w(),e=h("td"),l=Y("$"),E=Y(n),H=w(),z=h("td"),M=Y(U),V=w(),$=h("td"),y=h("span"),j=Y(L),R=w(),T=h("td"),B=h("div"),d=h("button"),at(D.$$.fragment),I=w(),S=h("button"),at(A.$$.fragment),F=w(),this.h()},l(v){t=f(v,"TR",{class:!0});var _=x(t);s=f(_,"TD",{class:!0});var W=x(s);c=G(W,i),W.forEach(u),b=C(_),m=f(_,"TD",{class:!0});var nt=x(m);a=G(nt,o),nt.forEach(u),p=C(_),e=f(_,"TD",{class:!0});var lt=x(e);l=G(lt,"$"),E=G(lt,n),lt.forEach(u),H=C(_),z=f(_,"TD",{class:!0});var ot=x(z);M=G(ot,U),ot.forEach(u),V=C(_),$=f(_,"TD",{});var it=x($);y=f(it,"SPAN",{class:!0});var ct=x(y);j=G(ct,L),ct.forEach(u),it.forEach(u),R=C(_),T=f(_,"TD",{class:!0});var dt=x(T);B=f(dt,"DIV",{class:!0});var rt=x(B);d=f(rt,"BUTTON",{class:!0,title:!0});var ut=x(d);et(D.$$.fragment,ut),ut.forEach(u),I=C(rt),S=f(rt,"BUTTON",{class:!0,title:!0});var ft=x(S);et(A.$$.fragment,ft),ft.forEach(u),rt.forEach(u),dt.forEach(u),F=C(_),_.forEach(u),this.h()},h(){g(s,"class","font-medium text-gray-900 dark:text-gray-50"),g(m,"class","text-gray-600 dark:text-gray-400"),g(e,"class","text-gray-900 dark:text-gray-50"),g(z,"class","text-gray-900 dark:text-gray-50"),g(y,"class",q="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(k[6].is_active?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400")),g(d,"class","p-1 text-gray-400 dark:text-gray-500 hover:text-blue-500 rounded"),g(d,"title","Edit plan"),g(S,"class","p-1 text-gray-400 dark:text-gray-500 hover:text-red-500 rounded"),g(S,"title","Delete plan"),g(B,"class","flex items-center justify-end space-x-2"),g(T,"class","text-right"),g(t,"class","hover:bg-gray-50 dark:hover:bg-gray-800")},m(v,_){J(v,t,_),r(t,s),r(s,c),r(t,b),r(t,m),r(m,a),r(t,p),r(t,e),r(e,l),r(e,E),r(t,H),r(t,z),r(z,M),r(t,V),r(t,$),r($,y),r(y,j),r(t,R),r(t,T),r(T,B),r(B,d),tt(D,d,null),r(B,I),r(B,S),tt(A,S,null),r(t,F),P=!0},p(v,_){var W;(!P||_&1)&&i!==(i=v[6].name+"")&&X(c,i),(!P||_&1)&&o!==(o=(((W=v[6].product)==null?void 0:W.name)||"Unknown")+"")&&X(a,o),(!P||_&1)&&n!==(n=v[6].price+"")&&X(E,n),(!P||_&1)&&U!==(U=v[6].billing_interval+"")&&X(M,U),(!P||_&1)&&L!==(L=v[6].is_active?"Active":"Inactive")&&X(j,L),(!P||_&1&&q!==(q="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(v[6].is_active?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400")))&&g(y,"class",q)},i(v){P||(N(D.$$.fragment,v),N(A.$$.fragment,v),P=!0)},o(v){O(D.$$.fragment,v),O(A.$$.fragment,v),P=!1},d(v){v&&u(t),Z(D),Z(A)}}}function Ht(k){let t,s,i,c,b='<h1 class="text-3xl font-bold text-gray-900 dark:text-gray-50">Plans</h1> <p class="text-gray-600 dark:text-gray-400 mt-2">Manage subscription plans</p>',m,o,a,p,e,l,n,E,H,z="Add Plan",U,M,V,$,y,L,j,q;p=new Ct({props:{size:18}}),n=new wt({props:{size:18}});const R=[Bt,Vt,Mt],T=[];function B(d,D){return d[1]?0:d[0].length===0?1:2}return $=B(k),y=T[$]=R[$](k),{c(){t=w(),s=h("div"),i=h("div"),c=h("div"),c.innerHTML=b,m=w(),o=h("div"),a=h("button"),at(p.$$.fragment),e=w(),l=h("button"),at(n.$$.fragment),E=w(),H=h("span"),H.textContent=z,U=w(),M=h("div"),V=h("div"),y.c(),this.h()},l(d){yt("svelte-usrt50",document.head).forEach(u),t=C(d),s=f(d,"DIV",{class:!0});var I=x(s);i=f(I,"DIV",{class:!0});var S=x(i);c=f(S,"DIV",{"data-svelte-h":!0}),K(c)!=="svelte-1i1hfkg"&&(c.innerHTML=b),m=C(S),o=f(S,"DIV",{class:!0});var A=x(o);a=f(A,"BUTTON",{class:!0,title:!0});var F=x(a);et(p.$$.fragment,F),F.forEach(u),e=C(A),l=f(A,"BUTTON",{class:!0});var P=x(l);et(n.$$.fragment,P),E=C(P),H=f(P,"SPAN",{"data-svelte-h":!0}),K(H)!=="svelte-h3w9po"&&(H.textContent=z),P.forEach(u),A.forEach(u),S.forEach(u),U=C(I),M=f(I,"DIV",{class:!0});var Q=x(M);V=f(Q,"DIV",{class:!0});var v=x(V);y.l(v),v.forEach(u),Q.forEach(u),I.forEach(u),this.h()},h(){document.title="Plans - Sigma Permit",g(a,"class","btn btn-primary p-2"),g(a,"title","Refresh"),g(l,"class","btn btn-primary flex items-center space-x-2"),g(o,"class","flex items-center space-x-3"),g(i,"class","flex items-center justify-between"),g(V,"class","table-container"),g(M,"class","card"),g(s,"class","space-y-6")},m(d,D){J(d,t,D),J(d,s,D),r(s,i),r(i,c),r(i,m),r(i,o),r(o,a),tt(p,a,null),r(o,e),r(o,l),tt(n,l,null),r(l,E),r(l,H),r(s,U),r(s,M),r(M,V),T[$].m(V,null),L=!0,j||(q=bt(a,"click",k[4]),j=!0)},p(d,[D]){let I=$;$=B(d),$===I?T[$].p(d,D):(vt(),O(T[I],1,1,()=>{T[I]=null}),mt(),y=T[$],y?y.p(d,D):(y=T[$]=R[$](d),y.c()),N(y,1),y.m(V,null))},i(d){L||(N(p.$$.fragment,d),N(n.$$.fragment,d),N(y),L=!0)},o(d){O(p.$$.fragment,d),O(n.$$.fragment,d),O(y),L=!1},d(d){d&&(u(t),u(s)),Z(p),Z(n),T[$].d(),j=!1,q()}}}let _t=10;function Lt(k,t,s){let i=[],c=!0,b=1,m=1;kt(async()=>{sessionStorage.getItem("access_token")&&await o()});async function o(p=1){try{s(1,c=!0),s(2,b=p);const e=await Dt.getPlans(p,_t);s(0,i=e.items||[]),m=Math.ceil((e.total||0)/_t)}catch(e){console.error("Error loading plans:",e),Pt.error("Failed to load plans")}finally{s(1,c=!1)}}return[i,c,b,o,()=>o(b)]}class qt extends Et{constructor(t){super(),Tt(this,t,Lt,Ht,xt,{})}}export{qt as component};
