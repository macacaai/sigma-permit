import{s as tt,u as De,v as Re,w as ot,x as it,y as ut,z as ct,d as f,B as dt,F as ie,m as n,i as A,b as u,l as fe,G as ft,H as Le,o as mt,g as y,c,e as p,p as K,j as k,h as d,q as pt,a as st,f as rt,t as at,n as Ke}from"../chunks/BM_9wLIj.js";import{S as lt,i as nt,d as Q,t as $,a as x,m as W,b as X,e as Y,c as Qe,g as We}from"../chunks/DQoX3H7n.js";import{g as Xe}from"../chunks/CS67i7yL.js";import{c as _t,t as de}from"../chunks/CEGMbthI.js";import{I as ht,g as gt,a as vt}from"../chunks/k9BU4UWw.js";import{U as bt}from"../chunks/BuL8p_Va.js";import{E as yt}from"../chunks/BSkdOch9.js";import{E as kt}from"../chunks/DkGKUkHf.js";import{L as wt}from"../chunks/DdsxKvKa.js";function $t(l){let e;const r=l[2].default,t=ot(r,l,l[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,a){t&&t.m(s,a),e=!0},p(s,a){t&&t.p&&(!e||a&8)&&it(t,r,s,s[3],e?ct(r,s[3],a,null):ut(s[3]),null)},i(s){e||(x(t,s),e=!0)},o(s){$(t,s),e=!1},d(s){t&&t.d(s)}}}function xt(l){let e,r;const t=[{name:"lock"},l[1],{iconNode:l[0]}];let s={$$slots:{default:[$t]},$$scope:{ctx:l}};for(let a=0;a<t.length;a+=1)s=De(s,t[a]);return e=new ht({props:s}),{c(){Y(e.$$.fragment)},l(a){X(e.$$.fragment,a)},m(a,i){W(e,a,i),r=!0},p(a,[i]){const m=i&3?gt(t,[t[0],i&2&&vt(a[1]),i&1&&{iconNode:a[0]}]):{};i&8&&(m.$$scope={dirty:i,ctx:a}),e.$set(m)},i(a){r||(x(e.$$.fragment,a),r=!0)},o(a){$(e.$$.fragment,a),r=!1},d(a){Q(e,a)}}}function Et(l,e,r){let{$$slots:t={},$$scope:s}=e;const a=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}]];return l.$$set=i=>{r(1,e=De(De({},e),Re(i))),"$$scope"in i&&r(3,s=i.$$scope)},e=Re(e),[a,e,t,s]}class Ye extends lt{constructor(e){super(),nt(this,e,Et,xt,tt,{})}}function Ze(l){let e,r=l[4].username+"",t;return{c(){e=d("p"),t=at(r),this.h()},l(s){e=c(s,"P",{class:!0});var a=p(e);t=rt(a,r),a.forEach(f),this.h()},h(){n(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(s,a){A(s,e,a),u(e,t)},p(s,a){a&16&&r!==(r=s[4].username+"")&&st(t,r)},d(s){s&&f(e)}}}function It(l){let e,r,t;return{c(){e=d("input"),this.h()},l(s){e=c(s,"INPUT",{id:!0,name:!0,type:!0,autocomplete:!0,class:!0,style:!0,placeholder:!0}),this.h()},h(){n(e,"id","password"),n(e,"name","password"),n(e,"type","password"),n(e,"autocomplete","current-password"),e.required=!0,n(e,"class","form-input pr-12"),Le(e,"padding-left","2.5rem"),n(e,"placeholder","Password")},m(s,a){A(s,e,a),ie(e,l[1]),r||(t=fe(e,"input",l[8]),r=!0)},p(s,a){a&2&&e.value!==s[1]&&ie(e,s[1])},d(s){s&&f(e),r=!1,t()}}}function Ct(l){let e,r,t;return{c(){e=d("input"),this.h()},l(s){e=c(s,"INPUT",{id:!0,name:!0,type:!0,autocomplete:!0,class:!0,style:!0,placeholder:!0}),this.h()},h(){n(e,"id","password"),n(e,"name","password"),n(e,"type","text"),n(e,"autocomplete","current-password"),e.required=!0,n(e,"class","form-input pr-12"),Le(e,"padding-left","2.5rem"),n(e,"placeholder","Password")},m(s,a){A(s,e,a),ie(e,l[1]),r||(t=fe(e,"input",l[7]),r=!0)},p(s,a){a&2&&e.value!==s[1]&&ie(e,s[1])},d(s){s&&f(e),r=!1,t()}}}function Pt(l){let e,r;return e=new kt({props:{class:"h-5 w-5 text-gray-400 hover:text-gray-600"}}),{c(){Y(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,s){W(e,t,s),r=!0},i(t){r||(x(e.$$.fragment,t),r=!0)},o(t){$(e.$$.fragment,t),r=!1},d(t){Q(e,t)}}}function St(l){let e,r;return e=new yt({props:{class:"h-5 w-5 text-gray-400 hover:text-gray-600"}}),{c(){Y(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,s){W(e,t,s),r=!0},i(t){r||(x(e.$$.fragment,t),r=!0)},o(t){$(e.$$.fragment,t),r=!1},d(t){Q(e,t)}}}function et(l){let e,r=l[4].password+"",t;return{c(){e=d("p"),t=at(r),this.h()},l(s){e=c(s,"P",{class:!0});var a=p(e);t=rt(a,r),a.forEach(f),this.h()},h(){n(e,"class","mt-1 text-sm text-red-600 dark:text-red-400")},m(s,a){A(s,e,a),u(e,t)},p(s,a){a&16&&r!==(r=s[4].password+"")&&st(t,r)},d(s){s&&f(e)}}}function Dt(l){let e,r="Sign in";return{c(){e=d("span"),e.textContent=r},l(t){e=c(t,"SPAN",{"data-svelte-h":!0}),K(e)!=="svelte-k61wwi"&&(e.textContent=r)},m(t,s){A(t,e,s)},i:Ke,o:Ke,d(t){t&&f(e)}}}function Lt(l){let e,r,t,s="Signing in...",a;return e=new wt({props:{size:16,class:"animate-spin"}}),{c(){Y(e.$$.fragment),r=k(),t=d("span"),t.textContent=s},l(i){X(e.$$.fragment,i),r=y(i),t=c(i,"SPAN",{"data-svelte-h":!0}),K(t)!=="svelte-13w1ymi"&&(t.textContent=s)},m(i,m){W(e,i,m),A(i,r,m),A(i,t,m),a=!0},i(i){a||(x(e.$$.fragment,i),a=!0)},o(i){$(e.$$.fragment,i),a=!1},d(i){i&&(f(r),f(t)),Q(e,i)}}}function Vt(l){let e,r,t,s,a,i,m,q,me="Sign in to your account",ue,T,be="Access the Sigma Permit management system",v,_,H,V,j,Ve="Username",ye,B,Z,z,ke,b,we,$e,N,M,Ne="Password",xe,E,ee,F,Ee,pe,I,C,P,_e,Ie,Ce,ce,U,S,D,Pe,G,Ue=`<div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md p-4"><div class="text-sm text-blue-800 dark:text-blue-200"><strong>Default Admin Credentials:</strong><br/>
            Username: <code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">admin</code><br/>
            Password: <code class="bg-blue-100 dark:bg-blue-800 px-1 rounded">admin123</code></div></div>`,te,Se,qe;i=new Ye({props:{class:"h-6 w-6 text-white"}}),z=new bt({props:{class:"h-5 w-5 text-gray-400"}});let h=l[4].username&&Ze(l);F=new Ye({props:{class:"h-5 w-5 text-gray-400"}});function Te(o,w){return o[2]?Ct:It}let he=Te(l),L=he(l);const Ae=[St,Pt],J=[];function He(o,w){return o[2]?0:1}C=He(l),P=J[C]=Ae[C](l);let g=l[4].password&&et(l);const je=[Lt,Dt],R=[];function Be(o,w){return o[3]?0:1}return S=Be(l),D=R[S]=je[S](l),{c(){e=k(),r=d("div"),t=d("div"),s=d("div"),a=d("div"),Y(i.$$.fragment),m=k(),q=d("h2"),q.textContent=me,ue=k(),T=d("p"),T.textContent=be,v=k(),_=d("form"),H=d("div"),V=d("div"),j=d("label"),j.textContent=Ve,ye=k(),B=d("div"),Z=d("div"),Y(z.$$.fragment),ke=k(),b=d("input"),we=k(),h&&h.c(),$e=k(),N=d("div"),M=d("label"),M.textContent=Ne,xe=k(),E=d("div"),ee=d("div"),Y(F.$$.fragment),Ee=k(),L.c(),pe=k(),I=d("button"),P.c(),Ie=k(),g&&g.c(),Ce=k(),ce=d("div"),U=d("button"),D.c(),Pe=k(),G=d("div"),G.innerHTML=Ue,this.h()},l(o){mt("svelte-1e0xby5",document.head).forEach(f),e=y(o),r=c(o,"DIV",{class:!0});var se=p(r);t=c(se,"DIV",{class:!0});var O=p(t);s=c(O,"DIV",{class:!0});var re=p(s);a=c(re,"DIV",{class:!0});var Me=p(a);X(i.$$.fragment,Me),Me.forEach(f),m=y(re),q=c(re,"H2",{class:!0,"data-svelte-h":!0}),K(q)!=="svelte-cdtupq"&&(q.textContent=me),ue=y(re),T=c(re,"P",{class:!0,"data-svelte-h":!0}),K(T)!=="svelte-rc2q3a"&&(T.textContent=be),re.forEach(f),v=y(O),_=c(O,"FORM",{class:!0});var ae=p(_);H=c(ae,"DIV",{class:!0});var ge=p(H);V=c(ge,"DIV",{});var le=p(V);j=c(le,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(j)!=="svelte-1f7p7ai"&&(j.textContent=Ve),ye=y(le),B=c(le,"DIV",{class:!0});var ve=p(B);Z=c(ve,"DIV",{class:!0});var Oe=p(Z);X(z.$$.fragment,Oe),Oe.forEach(f),ke=y(ve),b=c(ve,"INPUT",{id:!0,name:!0,type:!0,autocomplete:!0,class:!0,style:!0,placeholder:!0}),ve.forEach(f),we=y(le),h&&h.l(le),le.forEach(f),$e=y(ge),N=c(ge,"DIV",{});var ne=p(N);M=c(ne,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(M)!=="svelte-tyrfrg"&&(M.textContent=Ne),xe=y(ne),E=c(ne,"DIV",{class:!0});var oe=p(E);ee=c(oe,"DIV",{class:!0});var ze=p(ee);X(F.$$.fragment,ze),ze.forEach(f),Ee=y(oe),L.l(oe),pe=y(oe),I=c(oe,"BUTTON",{type:!0,class:!0,"aria-label":!0});var Fe=p(I);P.l(Fe),Fe.forEach(f),oe.forEach(f),Ie=y(ne),g&&g.l(ne),ne.forEach(f),ge.forEach(f),Ce=y(ae),ce=c(ae,"DIV",{});var Ge=p(ce);U=c(Ge,"BUTTON",{type:!0,class:!0});var Je=p(U);D.l(Je),Je.forEach(f),Ge.forEach(f),Pe=y(ae),G=c(ae,"DIV",{class:!0,"data-svelte-h":!0}),K(G)!=="svelte-qwd7c5"&&(G.innerHTML=Ue),ae.forEach(f),O.forEach(f),se.forEach(f),this.h()},h(){document.title="Login - Sigma Permit",n(a,"class","mx-auto h-12 w-12 bg-blue-600 rounded-full flex items-center justify-center"),n(q,"class","mt-6 text-3xl font-extrabold text-gray-900 dark:text-gray-50"),n(T,"class","mt-2 text-sm text-gray-600 dark:text-gray-400"),n(s,"class","text-center"),n(j,"for","username"),n(j,"class","form-label"),n(Z,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),n(b,"id","username"),n(b,"name","username"),n(b,"type","text"),n(b,"autocomplete","username"),b.required=!0,n(b,"class","form-input"),Le(b,"padding-left","2.5rem"),n(b,"placeholder","Username or Email"),n(B,"class","relative"),n(M,"for","password"),n(M,"class","form-label"),n(ee,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),n(I,"type","button"),n(I,"class","absolute inset-y-0 right-0 pr-3 flex items-center hover:bg-gray-100 dark:hover:bg-gray-700 rounded-r-lg transition-colors"),n(I,"aria-label",_e=l[2]?"Hide password":"Show password"),n(E,"class","relative"),n(H,"class","space-y-4"),n(U,"type","submit"),U.disabled=l[3],n(U,"class","btn btn-primary w-full flex items-center justify-center space-x-2"),n(G,"class","text-center"),n(_,"class","mt-8 space-y-6"),n(t,"class","max-w-md w-full space-y-8"),n(r,"class","min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8")},m(o,w){A(o,e,w),A(o,r,w),u(r,t),u(t,s),u(s,a),W(i,a,null),u(s,m),u(s,q),u(s,ue),u(s,T),u(t,v),u(t,_),u(_,H),u(H,V),u(V,j),u(V,ye),u(V,B),u(B,Z),W(z,Z,null),u(B,ke),u(B,b),ie(b,l[0]),u(V,we),h&&h.m(V,null),u(H,$e),u(H,N),u(N,M),u(N,xe),u(N,E),u(E,ee),W(F,ee,null),u(E,Ee),L.m(E,null),u(E,pe),u(E,I),J[C].m(I,null),u(N,Ie),g&&g.m(N,null),u(_,Ce),u(_,ce),u(ce,U),R[S].m(U,null),u(_,Pe),u(_,G),te=!0,Se||(qe=[fe(b,"input",l[6]),fe(I,"click",l[9]),fe(_,"submit",ft(l[5]))],Se=!0)},p(o,[w]){w&1&&b.value!==o[0]&&ie(b,o[0]),o[4].username?h?h.p(o,w):(h=Ze(o),h.c(),h.m(V,null)):h&&(h.d(1),h=null),he===(he=Te(o))&&L?L.p(o,w):(L.d(1),L=he(o),L&&(L.c(),L.m(E,pe)));let se=C;C=He(o),C!==se&&(We(),$(J[se],1,1,()=>{J[se]=null}),Qe(),P=J[C],P||(P=J[C]=Ae[C](o),P.c()),x(P,1),P.m(I,null)),(!te||w&4&&_e!==(_e=o[2]?"Hide password":"Show password"))&&n(I,"aria-label",_e),o[4].password?g?g.p(o,w):(g=et(o),g.c(),g.m(N,null)):g&&(g.d(1),g=null);let O=S;S=Be(o),S!==O&&(We(),$(R[O],1,1,()=>{R[O]=null}),Qe(),D=R[S],D||(D=R[S]=je[S](o),D.c()),x(D,1),D.m(U,null)),(!te||w&8)&&(U.disabled=o[3])},i(o){te||(x(i.$$.fragment,o),x(z.$$.fragment,o),x(F.$$.fragment,o),x(P),x(D),te=!0)},o(o){$(i.$$.fragment,o),$(z.$$.fragment,o),$(F.$$.fragment,o),$(P),$(D),te=!1},d(o){o&&(f(e),f(r)),Q(i),Q(z),h&&h.d(),Q(F),L.d(),J[C].d(),g&&g.d(),R[S].d(),Se=!1,dt(qe)}}}function Nt(l,e,r){let t="",s="",a=!1,i=!1,m={};pt(()=>{const v=sessionStorage.getItem("access_token"),_=sessionStorage.getItem("refresh_token");v&&_&&Xe("/")});async function q(){if(r(4,m={}),!t.trim()){r(4,m.username="Username is required",m);return}if(!s.trim()){r(4,m.password="Password is required",m);return}try{r(3,i=!0);const v=await _t.login(t.trim(),s);sessionStorage.setItem("access_token",v.access_token),sessionStorage.setItem("refresh_token",v.refresh_token),de.success("Login successful!"),Xe("/")}catch(v){if(console.error("Login error:",v),v.message&&v.message.includes("401"))de.error("Invalid username or password");else if(v.message&&v.message.includes("detail"))try{const _=JSON.parse(v.message);_.detail&&de.error(_.detail)}catch{de.error("Login failed. Please try again.")}else de.error("Login failed. Please try again.")}finally{r(3,i=!1)}}function me(){t=this.value,r(0,t)}function ue(){s=this.value,r(1,s)}function T(){s=this.value,r(1,s)}return[t,s,a,i,m,q,me,ue,T,()=>r(2,a=!a)]}class zt extends lt{constructor(e){super(),nt(this,e,Nt,Vt,tt,{})}}export{zt as component};
