import{s as ut,d as f,i as q,b as l,l as ft,m,o as dt,g as D,c as d,e as $,p as R,j as w,h,q as ht,n as et,r as gt,a as X,f as Z,t as tt}from"../chunks/BM_9wLIj.js";import{S as _t,i as mt,d as K,t as z,a as N,c as it,m as Y,b as Q,e as W,g as ct}from"../chunks/DQoX3H7n.js";import{f as pt,t as vt,e as st}from"../chunks/CEGMbthI.js";import{R as yt,P as xt,S as bt,T as $t}from"../chunks/lZ7b4qBu.js";import{S as kt}from"../chunks/DJ4DpfDi.js";function lt(k,t,r){const i=k.slice();return i[6]=t[r],i}function Tt(k){let t,r,i='<tr><th>Key</th> <th>Product</th> <th>Type</th> <th>Default Value</th> <th class="text-right">Actions</th></tr>',c,x,v,o=st(k[0]),a=[];for(let e=0;e<o.length;e+=1)a[e]=nt(lt(k,o,e));const p=e=>z(a[e],1,1,()=>{a[e]=null});return{c(){t=h("table"),r=h("thead"),r.innerHTML=i,c=w(),x=h("tbody");for(let e=0;e<a.length;e+=1)a[e].c();this.h()},l(e){t=d(e,"TABLE",{class:!0});var s=$(t);r=d(s,"THEAD",{"data-svelte-h":!0}),R(r)!=="svelte-1ml2vq"&&(r.innerHTML=i),c=D(s),x=d(s,"TBODY",{});var n=$(x);for(let T=0;T<a.length;T+=1)a[T].l(n);n.forEach(f),s.forEach(f),this.h()},h(){m(t,"class","table")},m(e,s){q(e,t,s),l(t,r),l(t,c),l(t,x);for(let n=0;n<a.length;n+=1)a[n]&&a[n].m(x,null);v=!0},p(e,s){if(s&1){o=st(e[0]);let n;for(n=0;n<o.length;n+=1){const T=lt(e,o,n);a[n]?(a[n].p(T,s),N(a[n],1)):(a[n]=nt(T),a[n].c(),N(a[n],1),a[n].m(x,null))}for(ct(),n=o.length;n<a.length;n+=1)p(n);it()}},i(e){if(!v){for(let s=0;s<o.length;s+=1)N(a[s]);v=!0}},o(e){a=a.filter(Boolean);for(let s=0;s<a.length;s+=1)z(a[s]);v=!1},d(e){e&&f(t),gt(a,e)}}}function Et(k){let t,r,i,c,x="No features found",v,o,a="Get started by creating your first feature.",p;return r=new kt({props:{class:"mx-auto text-gray-400 dark:text-gray-500 mb-4",size:48}}),{c(){t=h("div"),W(r.$$.fragment),i=w(),c=h("h3"),c.textContent=x,v=w(),o=h("p"),o.textContent=a,this.h()},l(e){t=d(e,"DIV",{class:!0});var s=$(t);Q(r.$$.fragment,s),i=D(s),c=d(s,"H3",{class:!0,"data-svelte-h":!0}),R(c)!=="svelte-1thoggt"&&(c.textContent=x),v=D(s),o=d(s,"P",{class:!0,"data-svelte-h":!0}),R(o)!=="svelte-gx2yb5"&&(o.textContent=a),s.forEach(f),this.h()},h(){m(c,"class","text-lg font-medium text-gray-900 dark:text-gray-50 mb-2"),m(o,"class","text-gray-600 dark:text-gray-400 mb-4"),m(t,"class","text-center py-12")},m(e,s){q(e,t,s),Y(r,t,null),l(t,i),l(t,c),l(t,v),l(t,o),p=!0},p:et,i(e){p||(N(r.$$.fragment,e),p=!0)},o(e){z(r.$$.fragment,e),p=!1},d(e){e&&f(t),K(r)}}}function Dt(k){let t,r='<div class="spinner mr-3"></div> <span class="text-gray-600 dark:text-gray-400">Loading features...</span>';return{c(){t=h("div"),t.innerHTML=r,this.h()},l(i){t=d(i,"DIV",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-1nw6a60"&&(t.innerHTML=r),this.h()},h(){m(t,"class","flex items-center justify-center py-12")},m(i,c){q(i,t,c)},p:et,i:et,o:et,d(i){i&&f(t)}}}function nt(k){var g;let t,r,i=k[6].key+"",c,x,v,o=(((g=k[6].product)==null?void 0:g.name)||"Unknown")+"",a,p,e,s=k[6].type+"",n,T,C,B=(JSON.stringify(k[6].default_value)||"-")+"",O,M,E,y,b,S,A,P,H,I,V;return S=new bt({props:{size:16}}),H=new $t({props:{size:16}}),{c(){t=h("tr"),r=h("td"),c=tt(i),x=w(),v=h("td"),a=tt(o),p=w(),e=h("td"),n=tt(s),T=w(),C=h("td"),O=tt(B),M=w(),E=h("td"),y=h("div"),b=h("button"),W(S.$$.fragment),A=w(),P=h("button"),W(H.$$.fragment),I=w(),this.h()},l(_){t=d(_,"TR",{class:!0});var u=$(t);r=d(u,"TD",{class:!0});var L=$(r);c=Z(L,i),L.forEach(f),x=D(u),v=d(u,"TD",{class:!0});var F=$(v);a=Z(F,o),F.forEach(f),p=D(u),e=d(u,"TD",{class:!0});var J=$(e);n=Z(J,s),J.forEach(f),T=D(u),C=d(u,"TD",{class:!0});var U=$(C);O=Z(U,B),U.forEach(f),M=D(u),E=d(u,"TD",{class:!0});var G=$(E);y=d(G,"DIV",{class:!0});var j=$(y);b=d(j,"BUTTON",{class:!0,title:!0});var at=$(b);Q(S.$$.fragment,at),at.forEach(f),A=D(j),P=d(j,"BUTTON",{class:!0,title:!0});var rt=$(P);Q(H.$$.fragment,rt),rt.forEach(f),j.forEach(f),G.forEach(f),I=D(u),u.forEach(f),this.h()},h(){m(r,"class","font-medium text-gray-900 dark:text-gray-50"),m(v,"class","text-gray-600 dark:text-gray-400"),m(e,"class","text-gray-900 dark:text-gray-50"),m(C,"class","text-gray-600 dark:text-gray-400"),m(b,"class","p-1 text-gray-400 dark:text-gray-500 hover:text-blue-500 rounded"),m(b,"title","Edit feature"),m(P,"class","p-1 text-gray-400 dark:text-gray-500 hover:text-red-500 rounded"),m(P,"title","Delete feature"),m(y,"class","flex items-center justify-end space-x-2"),m(E,"class","text-right"),m(t,"class","hover:bg-gray-50 dark:hover:bg-gray-800")},m(_,u){q(_,t,u),l(t,r),l(r,c),l(t,x),l(t,v),l(v,a),l(t,p),l(t,e),l(e,n),l(t,T),l(t,C),l(C,O),l(t,M),l(t,E),l(E,y),l(y,b),Y(S,b,null),l(y,A),l(y,P),Y(H,P,null),l(t,I),V=!0},p(_,u){var L;(!V||u&1)&&i!==(i=_[6].key+"")&&X(c,i),(!V||u&1)&&o!==(o=(((L=_[6].product)==null?void 0:L.name)||"Unknown")+"")&&X(a,o),(!V||u&1)&&s!==(s=_[6].type+"")&&X(n,s),(!V||u&1)&&B!==(B=(JSON.stringify(_[6].default_value)||"-")+"")&&X(O,B)},i(_){V||(N(S.$$.fragment,_),N(H.$$.fragment,_),V=!0)},o(_){z(S.$$.fragment,_),z(H.$$.fragment,_),V=!1},d(_){_&&f(t),K(S),K(H)}}}function wt(k){let t,r,i,c,x='<h1 class="text-3xl font-bold text-gray-900 dark:text-gray-50">Features</h1> <p class="text-gray-600 dark:text-gray-400 mt-2">Manage product features</p>',v,o,a,p,e,s,n,T,C,B="Add Feature",O,M,E,y,b,S,A,P;p=new yt({props:{size:18}}),n=new xt({props:{size:18}});const H=[Dt,Et,Tt],I=[];function V(g,_){return g[1]?0:g[0].length===0?1:2}return y=V(k),b=I[y]=H[y](k),{c(){t=w(),r=h("div"),i=h("div"),c=h("div"),c.innerHTML=x,v=w(),o=h("div"),a=h("button"),W(p.$$.fragment),e=w(),s=h("button"),W(n.$$.fragment),T=w(),C=h("span"),C.textContent=B,O=w(),M=h("div"),E=h("div"),b.c(),this.h()},l(g){dt("svelte-1i9o0zb",document.head).forEach(f),t=D(g),r=d(g,"DIV",{class:!0});var u=$(r);i=d(u,"DIV",{class:!0});var L=$(i);c=d(L,"DIV",{"data-svelte-h":!0}),R(c)!=="svelte-15et1ui"&&(c.innerHTML=x),v=D(L),o=d(L,"DIV",{class:!0});var F=$(o);a=d(F,"BUTTON",{class:!0,title:!0});var J=$(a);Q(p.$$.fragment,J),J.forEach(f),e=D(F),s=d(F,"BUTTON",{class:!0});var U=$(s);Q(n.$$.fragment,U),T=D(U),C=d(U,"SPAN",{"data-svelte-h":!0}),R(C)!=="svelte-wj3xs9"&&(C.textContent=B),U.forEach(f),F.forEach(f),L.forEach(f),O=D(u),M=d(u,"DIV",{class:!0});var G=$(M);E=d(G,"DIV",{class:!0});var j=$(E);b.l(j),j.forEach(f),G.forEach(f),u.forEach(f),this.h()},h(){document.title="Features - Sigma Permit",m(a,"class","btn btn-primary p-2"),m(a,"title","Refresh"),m(s,"class","btn btn-primary flex items-center space-x-2"),m(o,"class","flex items-center space-x-3"),m(i,"class","flex items-center justify-between"),m(E,"class","table-container"),m(M,"class","card"),m(r,"class","space-y-6")},m(g,_){q(g,t,_),q(g,r,_),l(r,i),l(i,c),l(i,v),l(i,o),l(o,a),Y(p,a,null),l(o,e),l(o,s),Y(n,s,null),l(s,T),l(s,C),l(r,O),l(r,M),l(M,E),I[y].m(E,null),S=!0,A||(P=ft(a,"click",k[4]),A=!0)},p(g,[_]){let u=y;y=V(g),y===u?I[y].p(g,_):(ct(),z(I[u],1,1,()=>{I[u]=null}),it(),b=I[y],b?b.p(g,_):(b=I[y]=H[y](g),b.c()),N(b,1),b.m(E,null))},i(g){S||(N(p.$$.fragment,g),N(n.$$.fragment,g),N(b),S=!0)},o(g){z(p.$$.fragment,g),z(n.$$.fragment,g),z(b),S=!1},d(g){g&&(f(t),f(r)),K(p),K(n),I[y].d(),A=!1,P()}}}let ot=10;function Ct(k,t,r){let i=[],c=!0,x=1,v=1;ht(async()=>{sessionStorage.getItem("access_token")&&await o()});async function o(p=1){try{r(1,c=!0),r(2,x=p);const e=await pt.getFeatures(p,ot);r(0,i=e.items||[]),v=Math.ceil((e.total||0)/ot)}catch(e){console.error("Error loading features:",e),vt.error("Failed to load features")}finally{r(1,c=!1)}}return[i,c,x,o,()=>o(x)]}class Ht extends _t{constructor(t){super(),mt(this,t,Ct,wt,ut,{})}}export{Ht as component};
